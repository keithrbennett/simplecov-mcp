<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MCP server, command line utility, and library for Ruby SimpleCov test coverage analysis"><link href=https://keithrbennett.github.io/cov-loupe/dev/arch-decisions/output-character-mode/ rel=canonical><link href=../simplecov-integration/ rel=prev><link href=../../presentations/cov-loupe-presentation/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Output Character Mode - CovLoupe Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/stylesheets/branding.css><link rel=stylesheet href=../../../assets/stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#output-character-mode class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="CovLoupe Documentation" class="md-header__button md-logo" aria-label="CovLoupe Documentation" data-md-component=logo> <img src=../../../assets/images/cov-loupe-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> CovLoupe Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Output Character Mode </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/keithrbennett/cov-loupe title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> keithrbennett/cov-loupe </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../user/INSTALLATION/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../user/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../user/migrations/ class=md-tabs__link> Migrations </a> </li> <li class=md-tabs__item> <a href=../../../user/prompts/ class=md-tabs__link> Prompt Library </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../../../contributing/ class=md-tabs__link> Contributing </a> </li> <li class=md-tabs__item> <a href=../../../code_of_conduct/ class=md-tabs__link> Code of Conduct </a> </li> <li class=md-tabs__item> <a href=../../../release_notes/ class=md-tabs__link> Release Notes </a> </li> <li class=md-tabs__item> <a href=../../../license/ class=md-tabs__link> License </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="CovLoupe Documentation" class="md-nav__button md-logo" aria-label="CovLoupe Documentation" data-md-component=logo> <img src=../../../assets/images/cov-loupe-logo.png alt=logo> </a> CovLoupe Documentation </label> <div class=md-nav__source> <a href=https://github.com/keithrbennett/cov-loupe title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> keithrbennett/cov-loupe </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user/INSTALLATION/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../QUICKSTART/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../../user/EXAMPLES/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/mcp-inputs/ class=md-nav__link> <span class=md-ellipsis> MCP Input Examples </span> </a> </li> <li class=md-nav__item> <a href=../../../examples/success_predicates/ class=md-nav__link> <span class=md-ellipsis> Success Predicate Examples </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../user/CLI_USAGE/ class=md-nav__link> <span class=md-ellipsis> CLI Usage </span> </a> </li> <li class=md-nav__item> <a href=../../../user/MCP_INTEGRATION/ class=md-nav__link> <span class=md-ellipsis> MCP Integration </span> </a> </li> <li class=md-nav__item> <a href=../../../user/LIBRARY_API/ class=md-nav__link> <span class=md-ellipsis> Library API </span> </a> </li> <li class=md-nav__item> <a href=../../../user/ADVANCED_USAGE/ class=md-nav__link> <span class=md-ellipsis> Advanced Usage </span> </a> </li> <li class=md-nav__item> <a href=../../../user/ERROR_HANDLING/ class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=../../../user/TROUBLESHOOTING/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../../../user/CLI_FALLBACK_FOR_LLMS/ class=md-nav__link> <span class=md-ellipsis> CLI Fallback for LLMs </span> </a> </li> <li class=md-nav__item> <a href=../../../user/installing-a-prelease-version-of-covloupe/ class=md-nav__link> <span class=md-ellipsis> Installing a Prerelease </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Migrations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Migrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user/migrations/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../user/migrations/MIGRATING_TO_V4/ class=md-nav__link> <span class=md-ellipsis> Migrating to v4 </span> </a> </li> <li class=md-nav__item> <a href=../../../user/migrations/MIGRATING_TO_V3/ class=md-nav__link> <span class=md-ellipsis> Migrating to v3 </span> </a> </li> <li class=md-nav__item> <a href=../../../user/migrations/MIGRATING_TO_V2/ class=md-nav__link> <span class=md-ellipsis> Migrating to v2 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Prompt Library </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Prompt Library </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user/prompts/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../user/prompts/coverage-analysis-prompt/ class=md-nav__link> <span class=md-ellipsis> Coverage Analysis </span> </a> </li> <li class=md-nav__item> <a href=../../../user/prompts/use-cli-not-mcp-prompt/ class=md-nav__link> <span class=md-ellipsis> Use CLI Not MCP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../ARCHITECTURE/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../DEVELOPMENT/ class=md-nav__link> <span class=md-ellipsis> Development </span> </a> </li> <li class=md-nav__item> <a href=../../RELEASING/ class=md-nav__link> <span class=md-ellipsis> Releasing </span> </a> </li> <li class=md-nav__item> <a href=../../FUTURE_ENHANCEMENTS/ class=md-nav__link> <span class=md-ellipsis> Future Enhancements </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_6 checked> <label class=md-nav__link for=__nav_6_6 id=__nav_6_6_label tabindex> <span class=md-ellipsis> Architecture Decisions </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> Architecture Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../application-architecture/ class=md-nav__link> <span class=md-ellipsis> Application Architecture </span> </a> </li> <li class=md-nav__item> <a href=../coverage-data-quality/ class=md-nav__link> <span class=md-ellipsis> Coverage Data Quality </span> </a> </li> <li class=md-nav__item> <a href=../path-resolution/ class=md-nav__link> <span class=md-ellipsis> Path Resolution </span> </a> </li> <li class=md-nav__item> <a href=../policy-validation/ class=md-nav__link> <span class=md-ellipsis> Policy Validation </span> </a> </li> <li class=md-nav__item> <a href=../simplecov-integration/ class=md-nav__link> <span class=md-ellipsis> SimpleCov Integration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Output Character Mode </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Output Character Mode </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#status class=md-nav__link> <span class=md-ellipsis> Status </span> </a> </li> <li class=md-nav__item> <a href=#context class=md-nav__link> <span class=md-ellipsis> Context </span> </a> <nav class=md-nav aria-label=Context> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-problem class=md-nav__link> <span class=md-ellipsis> The Problem </span> </a> </li> <li class=md-nav__item> <a href=#requirements class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=#considered-approaches class=md-nav__link> <span class=md-ellipsis> Considered Approaches </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#decision class=md-nav__link> <span class=md-ellipsis> Decision </span> </a> <nav class=md-nav aria-label=Decision> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mode-options class=md-nav__link> <span class=md-ellipsis> Mode Options </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#core-implementation class=md-nav__link> <span class=md-ellipsis> Core Implementation </span> </a> </li> <li class=md-nav__item> <a href=#transliteration-strategy class=md-nav__link> <span class=md-ellipsis> Transliteration Strategy </span> </a> </li> <li class=md-nav__item> <a href=#formatter-integration class=md-nav__link> <span class=md-ellipsis> Formatter Integration </span> </a> </li> <li class=md-nav__item> <a href=#error-message-integration class=md-nav__link> <span class=md-ellipsis> Error Message Integration </span> </a> </li> <li class=md-nav__item> <a href=#scope-of-conversion class=md-nav__link> <span class=md-ellipsis> Scope of Conversion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consequences class=md-nav__link> <span class=md-ellipsis> Consequences </span> </a> <nav class=md-nav aria-label=Consequences> <ul class=md-nav__list> <li class=md-nav__item> <a href=#positive class=md-nav__link> <span class=md-ellipsis> Positive </span> </a> </li> <li class=md-nav__item> <a href=#negative class=md-nav__link> <span class=md-ellipsis> Negative </span> </a> </li> <li class=md-nav__item> <a href=#trade-offs class=md-nav__link> <span class=md-ellipsis> Trade-offs </span> </a> </li> <li class=md-nav__item> <a href=#future-constraints class=md-nav__link> <span class=md-ellipsis> Future Constraints </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation-notes class=md-nav__link> <span class=md-ellipsis> Implementation Notes </span> </a> <nav class=md-nav aria-label="Implementation Notes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mode-precedence class=md-nav__link> <span class=md-ellipsis> Mode Precedence </span> </a> </li> <li class=md-nav__item> <a href=#performance-considerations class=md-nav__link> <span class=md-ellipsis> Performance Considerations </span> </a> </li> <li class=md-nav__item> <a href=#testing-strategy class=md-nav__link> <span class=md-ellipsis> Testing Strategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../presentations/cov-loupe-presentation/ class=md-nav__link> <span class=md-ellipsis> Presentations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../../code_of_conduct/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> <li class=md-nav__item> <a href=../../../release_notes/ class=md-nav__link> <span class=md-ellipsis> Release Notes </span> </a> </li> <li class=md-nav__item> <a href=../../../license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#status class=md-nav__link> <span class=md-ellipsis> Status </span> </a> </li> <li class=md-nav__item> <a href=#context class=md-nav__link> <span class=md-ellipsis> Context </span> </a> <nav class=md-nav aria-label=Context> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-problem class=md-nav__link> <span class=md-ellipsis> The Problem </span> </a> </li> <li class=md-nav__item> <a href=#requirements class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=#considered-approaches class=md-nav__link> <span class=md-ellipsis> Considered Approaches </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#decision class=md-nav__link> <span class=md-ellipsis> Decision </span> </a> <nav class=md-nav aria-label=Decision> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mode-options class=md-nav__link> <span class=md-ellipsis> Mode Options </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#core-implementation class=md-nav__link> <span class=md-ellipsis> Core Implementation </span> </a> </li> <li class=md-nav__item> <a href=#transliteration-strategy class=md-nav__link> <span class=md-ellipsis> Transliteration Strategy </span> </a> </li> <li class=md-nav__item> <a href=#formatter-integration class=md-nav__link> <span class=md-ellipsis> Formatter Integration </span> </a> </li> <li class=md-nav__item> <a href=#error-message-integration class=md-nav__link> <span class=md-ellipsis> Error Message Integration </span> </a> </li> <li class=md-nav__item> <a href=#scope-of-conversion class=md-nav__link> <span class=md-ellipsis> Scope of Conversion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consequences class=md-nav__link> <span class=md-ellipsis> Consequences </span> </a> <nav class=md-nav aria-label=Consequences> <ul class=md-nav__list> <li class=md-nav__item> <a href=#positive class=md-nav__link> <span class=md-ellipsis> Positive </span> </a> </li> <li class=md-nav__item> <a href=#negative class=md-nav__link> <span class=md-ellipsis> Negative </span> </a> </li> <li class=md-nav__item> <a href=#trade-offs class=md-nav__link> <span class=md-ellipsis> Trade-offs </span> </a> </li> <li class=md-nav__item> <a href=#future-constraints class=md-nav__link> <span class=md-ellipsis> Future Constraints </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation-notes class=md-nav__link> <span class=md-ellipsis> Implementation Notes </span> </a> <nav class=md-nav aria-label="Implementation Notes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mode-precedence class=md-nav__link> <span class=md-ellipsis> Mode Precedence </span> </a> </li> <li class=md-nav__item> <a href=#performance-considerations class=md-nav__link> <span class=md-ellipsis> Performance Considerations </span> </a> </li> <li class=md-nav__item> <a href=#testing-strategy class=md-nav__link> <span class=md-ellipsis> Testing Strategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=output-character-mode>Output Character Mode<a class=headerlink href=#output-character-mode title="Permanent link">&para;</a></h1> <p><a href=../../../ >Back to main README</a></p> <p>This document describes the architectural decision for implementing a global output character mode that controls ASCII vs Unicode output across CLI and MCP interfaces.</p> <h2 id=status>Status<a class=headerlink href=#status title="Permanent link">&para;</a></h2> <p>Accepted</p> <h2 id=context>Context<a class=headerlink href=#context title="Permanent link">&para;</a></h2> <p>cov-loupe outputs data in multiple formats across two interfaces:</p> <ol> <li><strong>CLI mode</strong>: Human users read terminal output including tables, error messages, and formatted coverage reports</li> <li><strong>MCP server mode</strong>: AI agents receive JSON responses containing coverage data and metadata</li> </ol> <h3 id=the-problem>The Problem<a class=headerlink href=#the-problem title="Permanent link">&para;</a></h3> <p>Modern projects often contain file paths with Unicode characters (e.g., accented characters, non-Latin scripts). The original implementation used Unicode characters throughout:</p> <ul> <li>Table borders using box-drawing characters (│ ─ ┌ ┐ └ ┘ ├ ┤ ┬ ┴ ┼)</li> <li>Source code markers (✓ for covered, · for uncovered)</li> <li>Error messages with file paths preserved as-is</li> </ul> <p>This caused issues in environments that don't support Unicode:</p> <ul> <li>Windows terminals with legacy encoding</li> <li>CI/CD systems with ASCII-only terminals</li> <li>Piped output to files or tools expecting ASCII</li> <li>Legacy systems without UTF-8 support</li> </ul> <p>Users experienced garbled output, corrupted tables, and unreadable error messages.</p> <h3 id=requirements>Requirements<a class=headerlink href=#requirements title="Permanent link">&para;</a></h3> <ul> <li><strong>ASCII mode</strong>: Must produce ASCII-only output (0-127 characters) when requested</li> <li><strong>Fancy mode</strong>: Should use Unicode characters for enhanced readability when supported</li> <li><strong>Auto-detection</strong>: Default mode should intelligently choose based on environment</li> <li><strong>MCP integration</strong>: MCP tools must support the same output modes as CLI</li> <li><strong>Comprehensive coverage</strong>: All output channels must respect the mode setting</li> <li><strong>Backward compatibility</strong>: Existing behavior (Unicode) should remain the default when supported</li> </ul> <h3 id=considered-approaches>Considered Approaches<a class=headerlink href=#considered-approaches title="Permanent link">&para;</a></h3> <ol> <li><strong>Separate ASCII formatters</strong>: Create duplicate formatter implementations for ASCII output</li> <li>Too much code duplication</li> <li> <p>Maintenance burden (two implementations of each formatter)</p> </li> <li> <p><strong>Post-process all output</strong>: Apply ASCII conversion after formatting</p> </li> <li>Inefficient (convert entire formatted output)</li> <li> <p>Could corrupt already-encoded data (JSON structure)</p> </li> <li> <p><strong>Centralized conversion with charsets</strong>: Define separate charsets and convert at formatting time</p> </li> <li>Clean separation of concerns</li> <li>Efficient (convert only what's displayed)</li> <li>Consistent across all formatters</li> </ol> <h2 id=decision>Decision<a class=headerlink href=#decision title="Permanent link">&para;</a></h2> <p>We implemented <strong>global output character mode</strong> with centralized conversion using charset definitions.</p> <h3 id=mode-options>Mode Options<a class=headerlink href=#mode-options title="Permanent link">&para;</a></h3> <p>Three modes are available: - <code>default</code>: Auto-detects terminal UTF-8 support at runtime → fancy if supported, otherwise ASCII - <code>fancy</code>: Forces Unicode output with box-drawing characters and fancy markers - <code>ascii</code>: Forces ASCII-only output with transliteration fallback to <code>?</code> for unknown characters</p> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h3> <ul> <li><strong>CLI</strong>: <code>-O/--output-chars MODE</code> flag (case-insensitive, short forms <code>d|f|a</code>)</li> <li><strong>MCP</strong>: Optional <code>output_chars</code> parameter in tool requests (overrides server default)</li> <li><strong>No environment variable</strong>: Intentionally omitted to keep configuration simple and explicit</li> </ul> <h3 id=core-implementation>Core Implementation<a class=headerlink href=#core-implementation title="Permanent link">&para;</a></h3> <p>The <code>OutputChars</code> module (<code>lib/cov_loupe/output_chars.rb</code>) provides:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>module</span><span class=w> </span><span class=nn>OutputChars</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=c1># Mode resolution</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=k>def</span><span class=w> </span><span class=nc>self</span><span class=o>.</span><span class=nf>resolve_mode</span><span class=p>(</span><span class=n>mode</span><span class=p>)</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=ss>:fancy</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=n>mode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:fancy</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=ss>:ascii</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=n>mode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:ascii</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>    </span><span class=c1># default: detect terminal UTF-8 support</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>    </span><span class=n>stdout_utf8?</span><span class=w> </span><span class=p>?</span><span class=w> </span><span class=ss>:fancy</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=ss>:ascii</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>  </span><span class=k>end</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>  </span><span class=c1># Character conversion using transliteration map</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>  </span><span class=k>def</span><span class=w> </span><span class=nc>self</span><span class=o>.</span><span class=nf>convert</span><span class=p>(</span><span class=n>text</span><span class=p>,</span><span class=w> </span><span class=n>mode</span><span class=p>)</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>text</span><span class=w> </span><span class=k>unless</span><span class=w> </span><span class=n>mode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:ascii</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>    </span><span class=n>text</span><span class=o>.</span><span class=n>chars</span><span class=o>.</span><span class=n>map</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=o>|</span><span class=n>c</span><span class=o>|</span><span class=w> </span><span class=no>TRANSLITERATIONS</span><span class=o>[</span><span class=n>c</span><span class=o>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>c</span><span class=o>.</span><span class=n>ascii_only?</span><span class=w> </span><span class=p>?</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s1>&#39;?&#39;</span><span class=w> </span><span class=p>}</span><span class=o>.</span><span class=n>join</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>  </span><span class=k>end</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=w>  </span><span class=c1># Charset selection</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=w>  </span><span class=k>def</span><span class=w> </span><span class=nc>self</span><span class=o>.</span><span class=nf>charset_for</span><span class=p>(</span><span class=n>mode</span><span class=p>)</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=w>    </span><span class=n>mode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=ss>:fancy</span><span class=w> </span><span class=p>?</span><span class=w> </span><span class=no>FANCY_CHARSET</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=no>ASCII_CHARSET</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=w>  </span><span class=k>end</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=k>end</span>
</code></pre></div> <h3 id=transliteration-strategy>Transliteration Strategy<a class=headerlink href=#transliteration-strategy title="Permanent link">&para;</a></h3> <p>Instead of a generic library (like <code>ActiveSupport::Multibyte</code>), we use an internal <code>TRANSLITERATIONS</code> hash mapping common characters to ASCII equivalents:</p> <ul> <li>Accented Latin characters (á → a, é → e, ñ → n, etc.)</li> <li>Symbols and punctuation (→ -&gt;, — --, © (C), etc.)</li> <li>Box-drawing characters (│ → |, ─ → -, ┌ → +, etc.)</li> </ul> <p>Characters without defined mappings fall back to <code>?</code> to maintain ASCII-only output.</p> <h3 id=formatter-integration>Formatter Integration<a class=headerlink href=#formatter-integration title="Permanent link">&para;</a></h3> <p>All formatters respect the <code>output_chars</code> parameter:</p> <ol> <li><strong>JSON</strong>: Uses <code>JSON.generate(..., ascii_only: true)</code> in ASCII mode</li> <li><strong>YAML</strong>: Post-processes through <code>OutputChars.convert</code></li> <li><strong>AmazingPrint</strong>: Post-processes through <code>OutputChars.convert</code></li> <li><strong>Tables</strong>: Uses appropriate charset (<code>OutputChars.charset_for</code>) and converts cell contents</li> <li><strong>Source</strong>: Uses ASCII-safe markers (<code>+</code>/<code>-</code> instead of <code>✓</code>/<code>·</code>) and converts source code</li> </ol> <h3 id=error-message-integration>Error Message Integration<a class=headerlink href=#error-message-integration title="Permanent link">&para;</a></h3> <ul> <li>CLI error handlers convert messages via <code>OutputChars.convert</code></li> <li>Staleness error messages convert file paths via <code>convert_path</code> lambda</li> <li>Option parser errors converted before display</li> <li>Backtrace lines converted in debug mode</li> </ul> <h3 id=scope-of-conversion>Scope of Conversion<a class=headerlink href=#scope-of-conversion title="Permanent link">&para;</a></h3> <p><strong>Converted in ASCII mode:</strong> - All CLI error messages and option parser errors - Staleness error messages and file paths - Command literal strings (via <code>convert_text</code> helper in BaseCommand) - MCP tool JSON responses (via <code>respond_json</code> with <code>ascii_only: true</code>) - All formatted output (tables, source, JSON, YAML)</p> <p><strong>Not converted in ASCII mode:</strong> - <strong>Log files</strong>: Preserved in original encoding for debugging fidelity. Log files are system/debugging artifacts, not user-facing output. Converting would lose exact file paths and error details needed for troubleshooting, create inconsistency between logged paths and actual filesystem paths, and provides no user value since logs are developer artifacts. - <strong>Gem post-install message</strong>: Intentionally left unchanged per requirements</p> <h2 id=consequences>Consequences<a class=headerlink href=#consequences title="Permanent link">&para;</a></h2> <h3 id=positive>Positive<a class=headerlink href=#positive title="Permanent link">&para;</a></h3> <ol> <li><strong>Broad compatibility</strong>: Works in any terminal environment, including legacy systems</li> <li><strong>Better UX</strong>: Fancy mode provides enhanced readability when Unicode is supported</li> <li><strong>Auto-detection</strong>: Default mode adapts to environment without user configuration</li> <li><strong>Comprehensive coverage</strong>: All output channels respect the mode setting</li> <li><strong>MCP parity</strong>: CLI and MCP interfaces have identical behavior</li> <li><strong>No dependencies</strong>: Internal transliteration map avoids external dependencies</li> <li><strong>Consistent behavior</strong>: Single source of truth for character conversion</li> </ol> <h3 id=negative>Negative<a class=headerlink href=#negative title="Permanent link">&para;</a></h3> <ol> <li><strong>Complexity</strong>: Additional configuration option and conversion logic to maintain</li> <li><strong>Transliteration coverage</strong>: Not all Unicode characters have mappings (falls back to <code>?</code>)</li> <li><strong>Performance</strong>: Conversion overhead for every output operation (minimal in practice)</li> <li><strong>Test burden</strong>: Comprehensive tests needed across all formatters and modes</li> </ol> <h3 id=trade-offs>Trade-offs<a class=headerlink href=#trade-offs title="Permanent link">&para;</a></h3> <ul> <li><strong>Internal vs external transliteration</strong>: Internal map is less comprehensive but avoids dependencies and keeps behavior predictable</li> <li><strong>Charset vs post-processing</strong>: Charsets are cleaner but require formatter awareness; post-processing is simpler but can corrupt structured data</li> <li><strong>Auto-detection vs explicit default</strong>: Auto-detection is more convenient but less predictable; explicit default is clearer but requires configuration</li> </ul> <h3 id=future-constraints>Future Constraints<a class=headerlink href=#future-constraints title="Permanent link">&para;</a></h3> <ul> <li>Any new formatters must respect <code>output_chars</code> parameter</li> <li>New output channels (e.g., HTML) need ASCII mode support</li> <li>Transliteration map must be maintained as new characters are encountered</li> <li>Log files must never be converted (documented design decision)</li> </ul> <h2 id=implementation-notes>Implementation Notes<a class=headerlink href=#implementation-notes title="Permanent link">&para;</a></h2> <h3 id=mode-precedence>Mode Precedence<a class=headerlink href=#mode-precedence title="Permanent link">&para;</a></h3> <ol> <li>Explicit mode parameter (CLI flag or MCP tool parameter)</li> <li>Server default (for MCP)</li> <li>Built-in default (auto-detect UTF-8 support)</li> </ol> <h3 id=performance-considerations>Performance Considerations<a class=headerlink href=#performance-considerations title="Permanent link">&para;</a></h3> <ul> <li>Conversion only applies in ASCII mode (fancy mode is a no-op)</li> <li>Transliteration map lookup is O(1) per character</li> <li>JSON <code>ascii_only: true</code> is optimized by the json gem</li> <li>Overall performance impact is negligible (&lt; 1ms for typical outputs)</li> </ul> <h3 id=testing-strategy>Testing Strategy<a class=headerlink href=#testing-strategy title="Permanent link">&para;</a></h3> <p>Comprehensive test coverage ensures correctness:</p> <ul> <li>Mode resolution and normalization tests</li> <li>Formatter tests for both ASCII and fancy modes</li> <li>CLI option parsing tests for <code>--output-chars</code> flag</li> <li>MCP tool output mode tests</li> <li>Staleness error message tests with Unicode file paths</li> <li>Integration tests across all subcommands with Unicode file names</li> </ul> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ul> <li>Core implementation: <code>lib/cov_loupe/output_chars.rb</code></li> <li>Configuration: <code>lib/cov_loupe/config/app_config.rb</code>, <code>lib/cov_loupe/config/option_normalizers.rb</code></li> <li>Formatters:</li> <li><code>lib/cov_loupe/formatters/formatters.rb</code> (JSON, YAML, AmazingPrint)</li> <li><code>lib/cov_loupe/formatters/table_formatter.rb</code> (tables)</li> <li><code>lib/cov_loupe/formatters/source_formatter.rb</code> (source code)</li> <li>Error handling: <code>lib/cov_loupe/cli.rb</code>, <code>lib/cov_loupe/errors/error_handler.rb</code></li> <li>MCP integration: <code>lib/cov_loupe/base_tool.rb</code>, <code>lib/cov_loupe/tools/*.rb</code></li> <li>CLI option parsing: <code>lib/cov_loupe/config/option_parser_builder.rb</code></li> <li>Tests:</li> <li><code>spec/cov_loupe/output_chars_spec.rb</code></li> <li><code>spec/cov_loupe/formatters/*_spec.rb</code></li> <li><code>spec/cov_loupe/cli/cli_output_chars_spec.rb</code></li> <li><code>spec/cov_loupe/tools/*_spec.rb</code></li> <li>Review document: <code>docs/dev/output-chars-review.md</code></li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../simplecov-integration/ class="md-footer__link md-footer__link--prev" aria-label="Previous: SimpleCov Integration"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> SimpleCov Integration </div> </div> </a> <a href=../../presentations/cov-loupe-presentation/ class="md-footer__link md-footer__link--next" aria-label="Next: Presentations"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Presentations </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a href=https://github.com/keithrbennett/cov-loupe target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://rubygems.org/gems/cov-loupe target=_blank rel=noopener title=rubygems.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M116.7 33.8c4.5-6.1 11.7-9.8 19.3-9.8h240c7.6 0 14.8 3.6 19.3 9.8l112 152c6.8 9.2 6.1 21.9-1.5 30.4l-232 256c-4.5 5-11 7.9-17.8 7.9s-13.2-2.9-17.8-7.9l-232-256c-7.7-8.5-8.3-21.2-1.5-30.4zm38.5 39.8c-3.3 2.5-4.2 7-2.1 10.5l57.4 95.7L63.3 192c-4.1.3-7.3 3.8-7.3 8s3.2 7.6 7.3 8l192 16h1.3l192-16c4.1-.3 7.3-3.8 7.3-8s-3.2-7.6-7.3-8l-147.2-12.3 57.4-95.6c2.1-3.5 1.2-8.1-2.1-10.5s-7.9-2-10.7 1l-90 97.6-90.1-97.6c-2.8-3-7.4-3.4-10.7-1"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.expand", "navigation.footer", "navigation.sections", "navigation.tabs", "navigation.top", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>